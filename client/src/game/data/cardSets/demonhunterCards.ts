/**
 * Demon Hunter Cards Collection
 * 
 * This file contains Demon Hunter-specific cards using the card builder API.
 * Demon Hunter cards focus on aggressive attack strategies, outcast mechanics, and fel magic.
 * 
 * Core Mechanics:
 * - Outcast: Special effects when played from leftmost or rightmost position
 * - Attack bonuses: Cards that enhance the hero's attack power
 * - Fel magic: Destructive spells and demon synergy
 * - Mobility: Cards with aggressive positioning and tempo
 */
import { debug } from '../../config/debugConfig';
import { SpellTargetType, BattlecryTargetType } from "../../types";
import { createCard } from "../cardManagement/cardBuilder";

const IS_DEV = import.meta.env?.DEV ?? false;

/**
 * Register all Demon Hunter cards in the registry
 * Card IDs:
 * - Demon Hunter minion cards: 90xx series
 * - Demon Hunter spell cards: 91xx series
 * - Demon Hunter weapons: 92xx series
 * - Demon Hunter tokens: 99xx series
 */
export function registerDemonHunterCards(): void {
  if (IS_DEV) debug.card('Registering Demon Hunter cards...');

  // Chaos Strike
  createCard()
    .id(9101)
    .name("Chaos Strike")
    .manaCost(2)
    .description("Give your hero +2 Attack this turn. Draw a card.")
    .flavorText("First lesson of Demon Hunter training: Hit face.")
    .type("spell")
    .rarity("common")
    .class("Demonhunter")
    .spellEffect({
      type: "hero_attack_buff",
      value: 2
    })
    .customProperty("duration", "current_turn")
    .customProperty("drawCards", 1)
    .collectible(true)
    .build();

  // Soul Cleave
  createCard()
    .id(9102)
    .name("Soul Cleave")
    .manaCost(3)
    .description("Deal 2 damage to two random enemy minions. Restore 2 Health to your hero.")
    .flavorText("It's like a hot knife through butter, except the knife is demonic, the butter is souls, and you're stabbing everyone.")
    .type("spell")
    .rarity("common")
    .class("Demonhunter")
    .spellEffect({
      type: "multi_target_damage_heal",
      value: 2,
      targetType: "random_enemy_minions" as SpellTargetType
    })
    .customProperty("targetCount", 2)
    .customProperty("healValue", 2)
    .collectible(true)
    .build();

  // Blur
  createCard()
    .id(9103)
    .name("Blur")
    .manaCost(0)
    .description("Your hero can't take damage this turn.")
    .flavorText("The first rule of Demon Hunter fight club is: you can't hit what you can't see.")
    .type("spell")
    .rarity("rare")
    .class("Demonhunter")
    .spellEffect({
      type: "grant_immunity",
      targetType: "friendly_hero" as SpellTargetType
    })
    .customProperty("duration", "current_turn")
    .collectible(true)
    .build();

  // Mana Burn
  createCard()
    .id(9104)
    .name("Mana Burn")
    .manaCost(1)
    .description("Your opponent has 2 fewer Mana Crystals next turn.")
    .flavorText("The best defense is a good offense, and the best offense is making sure your opponent can't play anything.")
    .type("spell")
    .rarity("rare")
    .class("Demonhunter")
    .spellEffect({
      type: "reduce_opponent_mana",
      value: 2
    })
    .customProperty("duration", "next_turn")
    .collectible(true)
    .build();

  // Skull of Gul'dan
  createCard()
    .id(9105)
    .name("Skull of Gul'dan")
    .manaCost(6)
    .description("Draw 3 cards. Outcast: Reduce their Cost by (3).")
    .flavorText("This might look like a powerful dark artifact to you, but to Typhon it's just a fancy candy dish.")
    .type("spell")
    .rarity("legendary")
    .class("Demonhunter")
    .addKeyword("outcast")
    .spellEffect({
      type: "draw",
      value: 3
    })
    .customProperty("outcast", {
      type: "reduce_drawn_card_cost",
      value: 3
    })
    .collectible(true)
    .build();

  // Glaivebound Adept
  createCard()
    .id(9111)
    .name("Glaivebound Adept")
    .manaCost(5)
    .attack(6)
    .health(4)
    .description("Battlecry: If your hero attacked this turn, deal 4 damage.")
    .flavorText("She bound her glaives so she would stop losing them around the house.")
    .type("minion")
    .rarity("rare")
    .class("Demonhunter")
    .addKeyword("battlecry")
    .battlecry({
      type: "damage",
      value: 4,
      targetType: "any" as BattlecryTargetType,
      requiresTarget: true,
      condition: "hero_attacked_this_turn"
    })
    .collectible(true)
    .build();

  // Altruis the Outcast
  createCard()
    .id(9112)
    .name("Altruis the Outcast")
    .manaCost(4)
    .attack(4)
    .health(3)
    .description("After you play the left- or right-most card in your hand, deal 1 damage to all enemies.")
    .flavorText("Being an outcast has some perks. Like sitting anywhere you want in the cafeteria.")
    .type("minion")
    .rarity("legendary")
    .class("Demonhunter")
    .customProperty("outcastTriggerEffect", {
      type: "damage_all_enemies",
      value: 1
    })
    .collectible(true)
    .build();

  // Metamorphosis
  createCard()
    .id(9113)
    .name("Metamorphosis")
    .manaCost(5)
    .description("Swap your Hero Power to \"Deal 4 damage.\" After 2 uses, swap back.")
    .flavorText("It's just a phase.")
    .type("spell")
    .rarity("legendary")
    .class("Demonhunter")
    .spellEffect({
      type: "swap_hero_power"
    })
    .customProperty("heroPowerId", 9114) // Demonic Blast hero power
    .customProperty("usesBeforeSwapBack", 2)
    .collectible(true)
    .build();

  // Demonic Blast (Hero Power from Metamorphosis)
  createCard()
    .id(9114)
    .name("Demonic Blast")
    .manaCost(1)
    .description("Deal 4 damage.")
    .flavorText("After 2 uses, swap back.")
    .type("spell")
    .rarity("legendary")
    .class("Demonhunter")
    .spellEffect({
      type: "damage",
      value: 4,
      targetType: "any" as SpellTargetType,
      requiresTarget: true
    })
    .collectible(false)
    .build();

  // Coordinated Strike
  createCard()
    .id(9116)
    .name("Coordinated Strike")
    .manaCost(3)
    .description("Summon three 1/1 Illidari with Rush.")
    .flavorText("The Illidari coordinate all their attacks because otherwise they look very silly.")
    .type("spell")
    .rarity("common")
    .class("Demonhunter")
    .spellEffect({
      type: "summon",
      value: 3,
      summonCardId: 9117 // Illidari Initiate
    })
    .collectible(true)
    .build();

  // Illidari Initiate (token from Coordinated Strike)
  createCard()
    .id(9117)
    .name("Illidari Initiate")
    .manaCost(1)
    .attack(1)
    .health(1)
    .description("Rush")
    .flavorText("They're very eager to prove themselves. Sometimes a little too eager.")
    .type("minion")
    .rarity("common")
    .class("Demonhunter")
    .addKeyword("rush")
    .collectible(false)
    .build();

  // Eye Beam
  createCard()
    .id(50001)
    .name("Eye Beam")
    .manaCost(3)
    .description("Deal 3 damage to a minion. Outcast: This costs (1).")
    .flavorText("Typhon's optometrist suggested he get glasses. Typhon suggested the optometrist get a new career.")
    .type("spell")
    .rarity("rare")
    .class("Demonhunter")
    .addKeyword("outcast")
    .spellEffect({
      type: "damage",
      value: 3,
      requiresTarget: true,
      targetType: "any_minion" as SpellTargetType
    })
    .customProperty("outcast", {
      type: "mana_discount",
      manaDiscount: 2,
      targetRequired: false
    })
    .collectible(true)
    .build();

  // Spectral Sight
  createCard()
    .id(50002)
    .name("Spectral Sight")
    .manaCost(2)
    .description("Draw a card. Outcast: Draw another.")
    .flavorText("When you sacrifice your eyes for power, you develop other ways of seeing. Like echolocation. Or really good hearing.")
    .type("spell")
    .rarity("common")
    .class("Demonhunter")
    .addKeyword("outcast")
    .spellEffect({
      type: "draw",
      value: 1
    })
    .customProperty("outcast", {
      type: "draw",
      value: 1
    })
    .collectible(true)
    .build();

  // Flamereaper
  createCard()
    .id(10008)
    .name("Flamereaper")
    .manaCost(7)
    .attack(3)
    .durability(2)
    .description("Also attacks the minions next to whomever your hero attacks.")
    .flavorText("It's a whirlwind of burning fel destruction. Doubles as a pizza cutter.")
    .type("weapon")
    .rarity("epic")
    .class("Demonhunter")
    .customProperty("cleaveEffect", {
      type: "attack_adjacent",
      value: 3
    })
    .collectible(true)
    .build();

  // Imprisoned Antaen
  createCard()
    .id(10009)
    .name("Imprisoned Antaen")
    .manaCost(5)
    .attack(10)
    .health(6)
    .description("Dormant for 2 turns. When this awakens, deal 10 damage randomly split among all enemies.")
    .flavorText("His 'time out' is over and he's ready to play.")
    .type("minion")
    .rarity("rare")
    .race("demon")
    .class("Demonhunter")
    .addKeyword("dormant")
    .customProperty("dormantTurns", 2)
    .customProperty("awakenEffect", {
      type: "damage",
      targetType: "all_enemy_minions_and_hero",
      value: 1,
      isSplit: true,
      targetsCount: 10,
      isRandom: true
    })
    .collectible(true)
    .build();

  if (IS_DEV) debug.card('Demon Hunter cards registered successfully.');
}