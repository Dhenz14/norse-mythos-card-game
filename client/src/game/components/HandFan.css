/* HandFan - Hearthstone-style hand display with spring physics */
/* Self-contained with CSS variable definitions */

.hand-fan-container {
  /* Define responsive card sizes with fallback to global vars */
  --fan-card-width: var(--hand-card-width, clamp(120px, 14vw, 220px));
  --fan-card-height: var(--hand-card-height, clamp(168px, 19.6vw, 308px));
  /* Spring easing for satisfying snap-back motion */
  --spring-easing: cubic-bezier(0.34, 1.18, 0.64, 1);
  --smooth-easing: cubic-bezier(0.19, 1, 0.22, 1);
  
  display: flex;
  justify-content: center;
  align-items: flex-end;
  position: relative;
  height: calc(var(--fan-card-height) + 80px);
  width: 100%;
  padding-bottom: 10px;
  overflow: visible;
}

.hand-fan-card {
  width: var(--fan-card-width);
  height: var(--fan-card-height);
  position: relative;
  flex-shrink: 0;
  /* Spring physics for smooth, satisfying motion */
  transition: 
    transform 0.35s var(--spring-easing), 
    z-index 0s,
    filter 0.2s ease;
  transform-origin: bottom center;
  cursor: pointer;
}

/* Overlap - each card overlaps the previous by ~40% */
.hand-fan-card:not(:first-child) {
  margin-left: calc(var(--fan-card-width) * -0.40);
}

/* Hovered state - handled via JS inline styles, but CSS fallback */
.hand-fan-card.is-hovered {
  filter: drop-shadow(0 20px 30px rgba(0, 0, 0, 0.5));
}

/* Playable cards — bright pulsing green glow to guide the player */
.hand-fan-card.playable {
  filter:
    drop-shadow(0 0 6px rgba(34, 197, 94, 0.55))
    drop-shadow(0 0 14px rgba(34, 197, 94, 0.3));
  animation: playableCardPulse 1.8s ease-in-out infinite;
}

@keyframes playableCardPulse {
  0%, 100% {
    filter:
      drop-shadow(0 0 6px rgba(34, 197, 94, 0.55))
      drop-shadow(0 0 14px rgba(34, 197, 94, 0.3));
  }
  50% {
    filter:
      drop-shadow(0 0 10px rgba(34, 197, 94, 0.85))
      drop-shadow(0 0 24px rgba(34, 197, 94, 0.5))
      drop-shadow(0 0 40px rgba(34, 197, 94, 0.2));
  }
}

.hand-fan-card.playable.is-hovered {
  animation: none;
  filter:
    drop-shadow(0 0 14px rgba(34, 197, 94, 0.9))
    drop-shadow(0 0 30px rgba(34, 197, 94, 0.55))
    drop-shadow(0 20px 30px rgba(0, 0, 0, 0.5));
}

/* Shake — unaffordable card click feedback */
.hand-fan-card.shake {
  animation: handCardShake 0.45s cubic-bezier(0.36, 0.07, 0.19, 0.97) both !important;
}

@keyframes handCardShake {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  15%       { transform: translateX(-8px) rotate(-3deg); }
  30%       { transform: translateX(8px) rotate(3deg); }
  45%       { transform: translateX(-6px) rotate(-2deg); }
  60%       { transform: translateX(6px) rotate(2deg); }
  75%       { transform: translateX(-3px) rotate(-1deg); }
  90%       { transform: translateX(3px) rotate(1deg); }
}

/* Empty hand message */
.hand-fan-empty {
  color: #fcd34d;
  font-size: 0.875rem;
  font-style: italic;
}

/* Responsive adjustments */
@media (max-width: 1280px) {
  .hand-fan-container {
    --fan-card-width: clamp(90px, 11vw, 150px);
    --fan-card-height: clamp(126px, 15vw, 210px);
  }
  
  .hand-fan-card:not(:first-child) {
    margin-left: calc(var(--fan-card-width) * -0.38);
  }
}

@media (max-width: 768px) {
  .hand-fan-container {
    --fan-card-width: clamp(80px, 16vw, 130px);
    --fan-card-height: clamp(112px, 22vw, 182px);
  }
  
  .hand-fan-card:not(:first-child) {
    margin-left: calc(var(--fan-card-width) * -0.35);
  }
}
