/* ========================================
   NORSE BATTLEFIELD ATMOSPHERE
   CSS-only dramatic effects for combat screen
   Embers, fog, vignette, and enriched background
   ======================================== */

/* ========================================
   1. EMBER / PARTICLE EFFECT
   Two pseudo-element layers on .game-viewport
   Layer 1: Small golden ember dots drifting upward
   Layer 2: Larger dim red/orange sparks floating diagonally
   ======================================== */

.game-viewport::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 950;
  background-image:
    radial-gradient(2px 2px at 10% 80%, rgba(255, 200, 50, 0.8), transparent),
    radial-gradient(2px 2px at 25% 65%, rgba(255, 180, 40, 0.7), transparent),
    radial-gradient(3px 3px at 40% 90%, rgba(255, 210, 60, 0.6), transparent),
    radial-gradient(2px 2px at 55% 75%, rgba(255, 190, 50, 0.8), transparent),
    radial-gradient(2px 2px at 70% 85%, rgba(255, 200, 40, 0.7), transparent),
    radial-gradient(3px 3px at 85% 70%, rgba(255, 215, 50, 0.6), transparent),
    radial-gradient(2px 2px at 15% 95%, rgba(255, 180, 60, 0.7), transparent),
    radial-gradient(2px 2px at 60% 60%, rgba(255, 200, 45, 0.5), transparent),
    radial-gradient(2px 2px at 90% 92%, rgba(255, 190, 55, 0.6), transparent),
    radial-gradient(3px 3px at 35% 50%, rgba(255, 210, 40, 0.5), transparent);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  animation: ember-drift-up 18s linear infinite;
  opacity: 0.7;
}

.game-viewport::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 951;
  background-image:
    radial-gradient(4px 4px at 8% 85%, rgba(200, 80, 30, 0.5), transparent),
    radial-gradient(5px 5px at 22% 70%, rgba(180, 60, 20, 0.4), transparent),
    radial-gradient(4px 4px at 45% 92%, rgba(210, 90, 40, 0.45), transparent),
    radial-gradient(5px 5px at 65% 78%, rgba(190, 70, 25, 0.4), transparent),
    radial-gradient(4px 4px at 80% 88%, rgba(200, 85, 35, 0.5), transparent),
    radial-gradient(5px 5px at 50% 55%, rgba(180, 65, 30, 0.35), transparent),
    radial-gradient(4px 4px at 92% 65%, rgba(210, 80, 40, 0.4), transparent),
    radial-gradient(5px 5px at 30% 95%, rgba(195, 75, 30, 0.45), transparent);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  animation: ember-drift-diagonal 28s linear infinite;
  opacity: 0.5;
}

@keyframes ember-drift-up {
  0% {
    transform: translateY(0);
    opacity: 0.7;
  }
  50% {
    opacity: 0.9;
  }
  100% {
    transform: translateY(-120%);
    opacity: 0;
  }
}

@keyframes ember-drift-diagonal {
  0% {
    transform: translate(0, 0);
    opacity: 0.5;
  }
  40% {
    opacity: 0.6;
  }
  100% {
    transform: translate(15%, -130%);
    opacity: 0;
  }
}

/* ========================================
   2. ATMOSPHERIC FOG / MIST
   Subtle dark smoky gradient at the bottom
   ======================================== */

.ragnarok-combat-arena.viewport-mode::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 30%;
  pointer-events: none;
  z-index: 1;
  background: linear-gradient(
    to top,
    rgba(8, 12, 24, 0.6) 0%,
    rgba(10, 14, 26, 0.35) 40%,
    rgba(12, 16, 30, 0.15) 70%,
    transparent 100%
  );
  opacity: 0.3;
}

/* ========================================
   3. VIGNETTE EFFECT
   Heavy inset shadow for dark edges
   ======================================== */

.game-viewport {
  box-shadow:
    inset 0 0 80px 30px rgba(0, 0, 0, 0.6),
    inset 0 0 200px 60px rgba(0, 0, 0, 0.3);
}

/* ========================================
   4. BACKGROUND UPGRADE
   Richer multi-stop Norse battlefield sky gradient
   Applied via GameViewport.css edit (not here)
   ======================================== */

/* ========================================
   REDUCED MOTION
   Disable all animations for accessibility
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .game-viewport::before,
  .game-viewport::after {
    animation: none;
    opacity: 0.3;
  }
}

/* ========================================
   BATTLEFIELD DIVIDER - Glowing rune-line
   ======================================== */
.ragnarok-combat-arena.viewport-mode::after {
  content: '';
  position: absolute;
  left: 5%;
  right: 5%;
  top: 45%;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(212, 175, 55, 0.15) 10%,
    rgba(212, 175, 55, 0.4) 30%,
    rgba(255, 215, 100, 0.6) 50%,
    rgba(212, 175, 55, 0.4) 70%,
    rgba(212, 175, 55, 0.15) 90%,
    transparent 100%
  );
  z-index: 2;
  pointer-events: none;
  box-shadow: 
    0 0 8px rgba(212, 175, 55, 0.3),
    0 0 20px rgba(212, 175, 55, 0.15);
  animation: divider-pulse 4s ease-in-out infinite;
}

@keyframes divider-pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
  .ragnarok-combat-arena.viewport-mode::after {
    animation: none;
    opacity: 0.7;
  }
}

/* ========================================
   ACTIVE TURN INDICATOR - Hero Portrait Glow
   Golden aura on player's turn, crimson on opponent's turn
   ======================================== */

.ragnarok-combat-arena.player-turn .unified-player-area .battlefield-hero-square {
  box-shadow:
    0 0 12px 4px rgba(212, 175, 55, 0.5),
    0 0 30px 8px rgba(212, 175, 55, 0.3),
    0 0 50px 16px rgba(212, 175, 55, 0.15);
  animation: player-turn-glow 2.5s ease-in-out infinite;
}

.ragnarok-combat-arena.opponent-turn .unified-opponent-hero .battlefield-hero-square {
  box-shadow:
    0 0 12px 4px rgba(220, 38, 38, 0.45),
    0 0 30px 8px rgba(220, 38, 38, 0.25),
    0 0 50px 16px rgba(220, 38, 38, 0.1);
  animation: opponent-turn-glow 2.5s ease-in-out infinite;
}

@keyframes player-turn-glow {
  0%, 100% {
    box-shadow:
      0 0 12px 4px rgba(212, 175, 55, 0.5),
      0 0 30px 8px rgba(212, 175, 55, 0.3),
      0 0 50px 16px rgba(212, 175, 55, 0.15);
  }
  50% {
    box-shadow:
      0 0 18px 6px rgba(212, 175, 55, 0.7),
      0 0 40px 12px rgba(212, 175, 55, 0.45),
      0 0 65px 20px rgba(212, 175, 55, 0.2);
  }
}

@keyframes opponent-turn-glow {
  0%, 100% {
    box-shadow:
      0 0 12px 4px rgba(220, 38, 38, 0.45),
      0 0 30px 8px rgba(220, 38, 38, 0.25),
      0 0 50px 16px rgba(220, 38, 38, 0.1);
  }
  50% {
    box-shadow:
      0 0 18px 6px rgba(220, 38, 38, 0.6),
      0 0 40px 12px rgba(220, 38, 38, 0.35),
      0 0 65px 20px rgba(220, 38, 38, 0.15);
  }
}

@media (prefers-reduced-motion: reduce) {
  .ragnarok-combat-arena.player-turn .unified-player-area .battlefield-hero-square,
  .ragnarok-combat-arena.opponent-turn .unified-opponent-hero .battlefield-hero-square {
    animation: none;
  }
}

/* ========================================
   PHASE TRANSITION BANNER
   Dramatic Norse-styled sweep banner for
   FAITH, FORESIGHT, DESTINY phase changes
   ======================================== */

.phase-banner {
  position: fixed;
  top: 40%;
  left: 0;
  width: 100%;
  transform: translateY(-50%);
  z-index: 2000;
  pointer-events: none;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(8, 6, 2, 0.85) 15%,
    rgba(12, 10, 4, 0.92) 50%,
    rgba(8, 6, 2, 0.85) 85%,
    transparent 100%
  );
  border-top: 1px solid rgba(212, 175, 55, 0.6);
  border-bottom: 1px solid rgba(212, 175, 55, 0.6);
  padding: 18px 0;
}

.phase-banner-enter {
  animation: phase-banner-sweep-in 0.3s ease-out forwards;
}

.phase-banner-exit {
  animation: phase-banner-sweep-out 0.3s ease-in forwards;
}

@keyframes phase-banner-sweep-in {
  0% {
    transform: translateY(-50%) translateX(-100%);
    opacity: 0;
  }
  100% {
    transform: translateY(-50%) translateX(0);
    opacity: 1;
  }
}

@keyframes phase-banner-sweep-out {
  0% {
    transform: translateY(-50%) translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateY(-50%) translateX(100%);
    opacity: 0;
  }
}

.phase-banner-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
  padding: 0 40px;
}

.phase-banner-line {
  flex: 1;
  max-width: 200px;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(212, 175, 55, 0.3) 20%,
    rgba(212, 175, 55, 0.8) 50%,
    rgba(212, 175, 55, 0.3) 80%,
    transparent 100%
  );
}

.phase-banner-text {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.phase-banner-title {
  font-family: 'Cinzel', 'Palatino Linotype', 'Georgia', serif;
  font-size: 1.6rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.3em;
  color: #d4af37;
  text-shadow:
    0 0 10px rgba(212, 175, 55, 0.6),
    0 0 20px rgba(212, 175, 55, 0.3),
    0 0 40px rgba(212, 175, 55, 0.15);
}

.phase-banner-subtitle {
  font-family: 'Cinzel', 'Palatino Linotype', 'Georgia', serif;
  font-size: 0.85rem;
  font-style: italic;
  letter-spacing: 0.15em;
  color: rgba(212, 175, 55, 0.65);
}

@media (prefers-reduced-motion: reduce) {
  .phase-banner-enter {
    animation: phase-banner-fade-in 0.3s ease-out forwards;
  }
  .phase-banner-exit {
    animation: phase-banner-fade-out 0.3s ease-in forwards;
  }
}

@keyframes phase-banner-fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes phase-banner-fade-out {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

/* ========================================
   BETTING BUTTON PRESS ANIMATIONS
   ======================================== */

/* Raise/Bet button - aggressive slam down effect */
.poker-btn.raise-btn:active:not(:disabled) {
  transform: scale(0.92) translateY(2px);
  box-shadow: 
    0 0 15px rgba(232, 90, 79, 0.6),
    0 0 30px rgba(232, 90, 79, 0.3),
    inset 0 2px 4px rgba(0, 0, 0, 0.4);
  transition: transform 0.08s ease-out, box-shadow 0.08s ease-out;
}

.poker-btn.raise-btn:not(:disabled) {
  transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background 0.2s;
}

/* Call/Check button - solid shield-block feel */
.poker-btn.call-btn:active:not(:disabled) {
  transform: scale(0.95) translateY(1px);
  box-shadow: 
    0 0 12px rgba(232, 197, 71, 0.5),
    0 0 25px rgba(232, 197, 71, 0.25),
    inset 0 2px 4px rgba(0, 0, 0, 0.4);
  transition: transform 0.08s ease-out, box-shadow 0.08s ease-out;
}

.poker-btn.call-btn:not(:disabled) {
  transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background 0.2s;
}

/* Fold button - dismiss/retreat feel */
.poker-btn.fold-btn:active:not(:disabled) {
  transform: scale(0.93) translateY(1px) rotate(-1deg);
  box-shadow: 
    0 0 10px rgba(90, 96, 112, 0.4),
    inset 0 2px 4px rgba(0, 0, 0, 0.5);
  transition: transform 0.08s ease-out, box-shadow 0.08s ease-out;
  opacity: 0.85;
}

.poker-btn.fold-btn:not(:disabled) {
  transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background 0.2s, opacity 0.15s;
}

/* Hover glow enhancement for all buttons */
.poker-btn.raise-btn:hover:not(:disabled) {
  box-shadow: 
    0 0 10px rgba(232, 90, 79, 0.4),
    0 0 20px rgba(232, 90, 79, 0.2),
    0 4px 8px rgba(180, 60, 40, 0.4);
}

.poker-btn.call-btn:hover:not(:disabled) {
  box-shadow: 
    0 0 10px rgba(232, 197, 71, 0.4),
    0 0 20px rgba(232, 197, 71, 0.2),
    0 4px 8px rgba(180, 140, 40, 0.4);
}

.poker-btn.fold-btn:hover:not(:disabled) {
  box-shadow: 
    0 0 8px rgba(90, 96, 112, 0.3),
    0 4px 8px rgba(40, 50, 70, 0.4);
}

@media (prefers-reduced-motion: reduce) {
  .poker-btn:active:not(:disabled) {
    transform: none;
  }
}

/* ========================================
   POT DISPLAY - Norse Treasure Offering
   ======================================== */
.pot-display-container {
  --pot-glow: rgba(212, 175, 55, calc(0.2 + var(--pot-intensity, 0) * 0.5));
  border: 1px solid rgba(212, 175, 55, calc(0.3 + var(--pot-intensity, 0) * 0.4)) !important;
  box-shadow: 
    0 0 calc(8px + var(--pot-intensity, 0) * 20px) var(--pot-glow),
    0 0 calc(4px + var(--pot-intensity, 0) * 40px) rgba(212, 175, 55, calc(0.05 + var(--pot-intensity, 0) * 0.15)),
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    inset 0 -1px 0 rgba(0, 0, 0, 0.3);
  animation: pot-ambient 3s ease-in-out infinite;
  transition: box-shadow 0.5s ease-out, border-color 0.5s ease-out;
}

@keyframes pot-ambient {
  0%, 100% { 
    box-shadow: 
      0 0 calc(8px + var(--pot-intensity, 0) * 20px) var(--pot-glow),
      0 0 calc(4px + var(--pot-intensity, 0) * 40px) rgba(212, 175, 55, calc(0.05 + var(--pot-intensity, 0) * 0.15)),
      inset 0 1px 0 rgba(255, 255, 255, 0.05),
      inset 0 -1px 0 rgba(0, 0, 0, 0.3);
  }
  50% { 
    box-shadow: 
      0 0 calc(12px + var(--pot-intensity, 0) * 25px) var(--pot-glow),
      0 0 calc(8px + var(--pot-intensity, 0) * 50px) rgba(212, 175, 55, calc(0.08 + var(--pot-intensity, 0) * 0.2)),
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      inset 0 -1px 0 rgba(0, 0, 0, 0.3);
  }
}

@media (prefers-reduced-motion: reduce) {
  .pot-display-container {
    animation: none;
  }
}
